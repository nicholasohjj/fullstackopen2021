(this["webpackJsonpthe-phonebook"]=this["webpackJsonpthe-phonebook"]||[]).push([[0],{38:function(e,n,t){"use strict";t.r(n);var r=t(14),o=t.n(r),a=t(3),c=t(1),u=t(0),i=function(e){var n=e.text,t=e.value,r=e.onChange;return Object(u.jsxs)("div",{children:[n,":",Object(u.jsx)("input",{value:t,onChange:r})]})},s=function(e){var n=e.addName,t=e.newName,r=e.handleNameChange,o=e.newNumber,a=e.handleNumberChange;return Object(u.jsx)("div",{children:Object(u.jsxs)("form",{onSubmit:n,children:[Object(u.jsx)(i,{text:"Name ",value:t,onChange:r}),Object(u.jsx)(i,{text:"Phone number ",value:o,onChange:a}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",children:"add"})})]})})},l=t(4),d=t.n(l),b="/api/persons",h=function(){return d.a.get(b).then((function(e){return e.data}))},j=function(e){return d.a.post(b,e).then((function(e){return e.data}))},f=function(e){return d.a.delete("".concat(b,"/").concat(e))},m=function(e,n){return d.a.put("".concat(b,"/").concat(e),n).then((function(e){return e.data}))},O=function(e){var n=e.person,t=e.id,r=e.setPersons,o=e.persons;return Object(u.jsx)("button",{onClick:function(){window.confirm("Do you want to delete ".concat(n.name))&&(f(t),r(o.filter((function(e){return e.id!==t}))))},children:"Delete"})},v=function(e){var n=e.notesToShow,t=e.setPersons,r=e.persons;return Object(u.jsx)("div",{children:Object(u.jsx)("ul",{children:n.map((function(e){return Object(u.jsxs)("li",{children:[e.name," ",e.number,Object(u.jsx)(O,{person:e,id:e.id,setPersons:t,persons:r})]},e.name)}))})})},g=function(e){var n=e.newFilter,t=e.handleNamefilter;return Object(u.jsxs)("div",{children:["filter by name:",Object(u.jsx)("input",{value:n,onChange:t})]})},x=function(e){var n=e.message;return null===n?null:Object(u.jsx)("div",{style:{color:"green",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},children:n})},p=function(){var e=Object(c.useState)([]),n=Object(a.a)(e,2),t=n[0],r=n[1],o=Object(c.useState)(""),i=Object(a.a)(o,2),l=i[0],d=i[1],b=Object(c.useState)(""),f=Object(a.a)(b,2),O=f[0],p=f[1],w=Object(c.useState)(""),N=Object(a.a)(w,2),C=N[0],y=N[1],S=Object(c.useState)(null),k=Object(a.a)(S,2),P=k[0],T=k[1];Object(c.useEffect)((function(){h().then((function(e){return r(e)}))}),[]);var L=C.trim()?t.filter((function(e){return e.name.toLowerCase().includes(C.toLowerCase())})):t;return Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:"Phonebook"}),Object(u.jsx)(x,{message:P}),Object(u.jsx)(g,{newFilter:C,handleNamefilter:function(e){console.log(e.target.value),y(e.target.value)}}),Object(u.jsx)("h2",{children:"Add a new"}),Object(u.jsx)(s,{addName:function(e){e.preventDefault();var n={name:l.trim(),number:O},o=t.filter((function(e){return e.name.toLowerCase().includes(n.name.toLowerCase())}));if(console.log(o),o.length>0){if(window.confirm("".concat(l," is already added to phonebook. Would you like to update the number?")))return m(o[0].id,n).then((function(e){r(t.map((function(n){return n.id!==o[0].id?n:e}))),T("".concat(l," has been updated")),setTimeout((function(){return T(null)}),5e3)})).catch((function(e){T("".concat(l," has been already been removed from the server")),setTimeout((function(){return T(null)}),5e3)}))}else""===l.trim()||""===O.trim()?alert("Name/number must be filled"):j(n).then((function(e){r(t.concat(e)),T("".concat(l," has been added")),setTimeout((function(){return T(null)}),5e3)})).catch((function(e){T("".concat(l," has been already been added to the server")),setTimeout((function(){return T(null)}),5e3)}));p(""),d("")},newName:l,handleNameChange:function(e){console.log(e.target.value),d(e.target.value)},newNumber:O,handleNumberChange:function(e){console.log(e.target.value),p(e.target.value)}}),Object(u.jsx)("h2",{children:"Numbers"}),Object(u.jsx)(v,{notesToShow:L,setPersons:r,persons:t})]})};o.a.render(Object(u.jsx)(p,{}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.781385c4.chunk.js.map